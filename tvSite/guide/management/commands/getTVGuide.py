import urllib2from django.core.management.base import BaseCommand, CommandErrorfrom xml.dom.minidom import parse, parseStringfrom tvSite.guide.models import Show, GuideEntryfrom datetime import datetimedef dlGuide():    """    This function will download the XML file from the site provided    and parse it into the database    """    xml_guide_url = "http://services.tvrage.com/feeds/fullschedule.php?country=US"    print "Downloading TV Guide... "    try:        req = urllib2.Request(xml_guide_url)        handle = urllib2.urlopen(req)        thepage = handle.read()    except Exception, e:        print "failed to retrieve XML data"        return    print "Parsing XML File... "    dom = parseString(thepage)      objList = []    print "Adding entries to DB... "    for day_node in dom.getElementsByTagName("DAY"):        for time_node in day_node.getElementsByTagName("time"):            for show_node in time_node.getElementsByTagName("show"):                sid = -1                #Get the show ID                for a_node in show_node.getElementsByTagName("sid"):                     sid = int(a_node.firstChild.data)                #If no show ID could be retrieved, skip this show                if sid == -1:                    continue                network = 'unknown'                #Get the network the show is playing on                for a_node in show_node.getElementsByTagName("network"):                     network = a_node.firstChild.data                new_show = Show()                new_show.name = show_node.getAttribute("name")                new_show.id = sid                new_show.save()                                new_entry = GuideEntry()                #Complite a date/time stamp for the show                date_object = datetime.strptime(day_node.getAttribute("attr") +                    " " + time_node.getAttribute("attr"),'%Y-%m-%d %I:%M %p')                new_entry.start = date_object                new_entry.network = network                new_entry.show = new_show                new_entry.save()class Command(BaseCommand):    args = 'None Required'    help = 'None currently'    def handle(self, *args, **options):        dlGuide()